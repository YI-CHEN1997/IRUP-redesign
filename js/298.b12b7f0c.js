"use strict";(self["webpackChunkirup_redesign"]=self["webpackChunkirup_redesign"]||[]).push([[298],{298:function(e,a,t){t.r(a),t.d(a,{default:function(){return he}});var i=t(252),l=t(963),s=t(577);const n=e=>((0,i.dD)("data-v-24f5b3c2"),e=e(),(0,i.Cn)(),e),o={class:"container"},c={class:"modal fade",tabindex:"-1",id:"NewCaseModal"},r={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl"},d={class:"modal-content"},p=n((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title"},"Add New Publication"),(0,i._)("button",{type:"button",class:"btn-close",id:"close-modal","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),u={class:"modal-body"},f={class:"container"},g={class:"inputs"},m={class:"category form-floating mx-3 mt-3"},b=n((()=>(0,i._)("label",{for:"floatingInput"},"Category",-1))),y={class:"organization form-floating mx-3 mt-3"},h=n((()=>(0,i._)("label",{for:"floatingInput subtitle"},"Organization",-1))),_={class:"year form-floating mx-3 mt-3"},v=n((()=>(0,i._)("label",{for:"floatingInput year"},"Public Year",-1))),w={class:"description form-floating mx-3 mt-3"},x=n((()=>(0,i._)("label",{for:"floatingInput year"},"Description",-1))),k={class:"videoUpLoad mx-3 mt-3 p-3 d-flex align-items-center"},C={for:"publicationFile",class:"p-5 px-0"},U={key:0},D=n((()=>(0,i._)("i",{class:"fas fa-file-alt"},null,-1))),F=(0,i.Uk)("Upload File (PDF only) "),L=[D,F],P={key:1},z=n((()=>(0,i._)("i",{class:"fas fa-file-alt"},null,-1))),R=(0,i.Uk)("Change File (PDF only) "),j=[z,R],$={key:0,class:"filePreview"},I=n((()=>(0,i._)("hr",null,null,-1))),N=["src"],O={class:"modal-footer"},Y=(0,i.Uk)(" SAVE "),q={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},V={class:"title position-relative"},E=n((()=>(0,i._)("h1",{class:"uppercase text-center d-flex justify-content-center"}," publication ",-1))),J={key:0,class:"plus-btn"},A=n((()=>(0,i._)("span",{class:"d-flex justify-content-center add-btn align-items-center","data-bs-toggle":"modal","data-bs-target":"#NewCaseModal"},[(0,i._)("i",{class:"fa-solid fa-plus"})],-1))),B=[A],H={class:"row justify-content-center mt-5"};function M(e,a,t,n,D,F){const z=(0,i.up)("LoadingComponent"),R=(0,i.up)("ListCard");return(0,i.wg)(),(0,i.iD)("main",null,[(0,i.wy)((0,i.Wm)(z,null,null,512),[[l.F8,D.loading]]),(0,i._)("div",o,[(0,i._)("div",c,[(0,i._)("div",r,[(0,i._)("div",d,[p,(0,i._)("div",u,[(0,i._)("div",f,[(0,i._)("div",g,[(0,i._)("div",m,[(0,i.wy)((0,i._)("input",{class:"type-in-box form-control",type:"text",placeholder:"Category","onUpdate:modelValue":a[0]||(a[0]=e=>D.category=e)},null,512),[[l.nr,D.category]]),b]),(0,i._)("div",y,[(0,i.wy)((0,i._)("input",{class:"type-in-box form-control",type:"text",placeholder:"Organization","onUpdate:modelValue":a[1]||(a[1]=e=>D.organization=e)},null,512),[[l.nr,D.organization]]),h]),(0,i._)("div",_,[(0,i.wy)((0,i._)("input",{class:"type-in-box form-control",type:"text",placeholder:"Year","onUpdate:modelValue":a[2]||(a[2]=e=>D.year=e)},null,512),[[l.nr,D.year]]),v]),(0,i._)("div",w,[(0,i.wy)((0,i._)("input",{class:"type-in-box form-control",type:"text",placeholder:"description","onUpdate:modelValue":a[3]||(a[3]=e=>D.description=e)},null,512),[[l.nr,D.description]]),x]),(0,i._)("div",k,[(0,i._)("label",C,[D.fileURL?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",U,L)),D.fileURL?((0,i.wg)(),(0,i.iD)("span",P,j)):(0,i.kq)("",!0),(0,i._)("input",{type:"file",ref:"publicationFile",id:"publicationFile",onChange:a[4]||(a[4]=(...e)=>F.fileChange&&F.fileChange(...e)),accept:"application/pdf,application/vnd.ms-excel"},null,544)])]),D.fileURL?((0,i.wg)(),(0,i.iD)("div",$,[I,(0,i._)("iframe",{src:D.fileURL,alt:"",style:{width:"100%"}},null,8,N)])):(0,i.kq)("",!0)])])]),(0,i._)("div",O,[(0,i._)("button",{type:"button",class:"btn",onClick:a[5]||(a[5]=(...e)=>F.uploadFile&&F.uploadFile(...e))},[Y,D.loading?((0,i.wg)(),(0,i.iD)("span",q)):(0,i.kq)("",!0)])])])])]),(0,i._)("div",V,[E,F.user?((0,i.wg)(),(0,i.iD)("div",J,B)):(0,i.kq)("",!0)]),(0,i._)("div",H,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.publications,(e=>((0,i.wg)(),(0,i.j4)(R,{key:e,publication:e},{default:(0,i.w5)((()=>[(0,i._)("hr",{style:(0,s.j5)(e==D.publications[D.publications.length-1]?"display: none ;":"")},null,4)])),_:2},1032,["publication"])))),128))])])])}const W=e=>((0,i.dD)("data-v-7d47180c"),e=e(),(0,i.Cn)(),e),Z={class:"list-card col-xxl-9 col-lg-10 col-md-10 mb-3"},K={class:"d-flex justify-content-center"},S={class:"date"},T={class:"circle"},X={class:"year-org-group"},G={class:"year mb-2"},Q={class:"d-flex justify-content-end"},ee={class:"org"},ae={class:"category"},te={class:"d-flex justify-content-between align-items-center mb-2"},ie={class:"category-title"},le=["href"],se=W((()=>(0,i._)("div",{class:"link d-flex align-items-center"},[(0,i._)("i",{class:"arrow fa-solid fa-angles-right"}),(0,i._)("h4",{class:"refrence"},"Refrence")],-1))),ne=[se],oe={class:"description"};function ce(e,a,t,l,n,o){return(0,i.wg)(),(0,i.iD)("div",Z,[(0,i._)("div",K,[(0,i._)("div",S,[(0,i._)("div",T,[(0,i._)("div",X,[(0,i._)("h4",G,(0,s.zw)(t.publication.Year),1),(0,i._)("div",Q,[(0,i._)("h5",ee,(0,s.zw)(t.publication.Organization),1)])])])]),(0,i._)("div",ae,[(0,i._)("div",te,[(0,i._)("h4",ie,(0,s.zw)(t.publication.Category),1),(0,i._)("a",{href:t.publication.FileURL},ne,8,le)]),(0,i._)("h5",oe,(0,s.zw)(t.publication.Description),1)])]),(0,i.WI)(e.$slots,"default",{},void 0,!0)])}var re={setup(){},props:{publication:Object}},de=t(744);const pe=(0,de.Z)(re,[["render",ce],["__scopeId","data-v-7d47180c"]]);var ue=pe,fe=t(911),ge=t(257),me=t(153),be={setup(){},created(){this.getPublications()},components:{ListCard:ue},computed:{user(){return this.$store.state.user}},data(){return{loading:null,category:"",organization:"",year:"",description:"",fileName:"",fileURL:"",publications:[],infos:[{date:"2017"},{date:"2018"},{date:"2019"},{date:"2020"}]}},methods:{async getPublications(){const e=[],a=(0,ge.hJ)(fe.db,"Publication"),t=(0,ge.IO)(a,(0,ge.Xo)("Year","desc")),i=await(0,ge.PL)(t);i.docs.forEach((a=>{e.push({...a.data()})})),this.publications=e},fileChange(e){let a=e.target.files[0],t=new FormData;t.append("pdf",a),this.fileName=a.name,this.fileURL=URL.createObjectURL(a)},async uploadFile(){if(4===this.year.length)if(""!=this.fileName&&""!=this.fileURL){this.loading=!0;const e=(0,me.iH)(fe.tO,`/PublicationFiles/${this.year}/${this.fileName}`),a=(0,me.B0)(e,this.file);a.on("state_changed",(e=>{console.log(e)}),(e=>{this.$snackbar.add({type:"error",text:`${e.message}`})}),(async()=>{const e=await(0,me.Jt)(a.snapshot.ref),t=(0,ge.hJ)(fe.db,"Publication");(0,ge.ET)(t,{Category:this.category,Organization:this.organization,Year:this.year,Description:this.description,FileName:this.fileName,FileURL:e}).then((()=>{this.loading=!1,document.getElementById("close-modal").click()})).catch((e=>{this.$snackbar.add({type:"error",text:`${e.message}`})}))}))}else this.$snackbar.add({type:"error",text:"Please upload a PDF file."});else this.$snackbar.add({type:"error",text:"Please enter correct publish year."})}}};const ye=(0,de.Z)(be,[["render",M],["__scopeId","data-v-24f5b3c2"]]);var he=ye}}]);
//# sourceMappingURL=298.b12b7f0c.js.map