"use strict";(self["webpackChunkirup_redesign"]=self["webpackChunkirup_redesign"]||[]).push([[201],{826:function(e,t,s){s.d(t,{Z:function(){return X}});var a=s(252),o=s(963),l=s(577);const i=e=>((0,a.dD)("data-v-645d5542"),e=e(),(0,a.Cn)(),e),n={class:"container"},d={class:"modal fade",tabindex:"-1",id:"NewCaseModal"},c={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl"},r={class:"modal-content"},u=i((()=>(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title"},"Add New Case Study"),(0,a._)("button",{type:"button",class:"btn-close",id:"close-modal","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),m={class:"modal-body"},h={class:"container"},g={class:"inputs"},p={class:"caseTitle form-floating mx-3 mt-3"},f=i((()=>(0,a._)("label",{for:"floatingInput"},"Case Title",-1))),v={class:"subtitle form-floating mx-3 mt-3"},C=i((()=>(0,a._)("label",{for:"floatingInput subtitle"},"Subtitle",-1))),b={class:"caseCoverPhoto mx-3 mt-3 p-3 d-flex align-items-center"},_={for:"caseCoverPhoto",class:"p-5 px-0"},y={key:0},w=i((()=>(0,a._)("i",{class:"fa-solid fa-image"},null,-1))),P=(0,a.Uk)("Upload Cover Photo (PNG, JPG) "),S=[w,P],k=["src"],x={class:"caseContent mx-3 mt-3"},U={class:"modal-footer"},T=(0,a.Uk)(" SAVE "),D={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},L={class:"title position-relative"},R=i((()=>(0,a._)("h1",{class:"uppercase text-center d-flex justify-content-center"}," case studies ",-1))),N={key:0,class:"plus-btn"},I=i((()=>(0,a._)("span",{class:"d-flex justify-content-center add-btn align-items-center","data-bs-toggle":"modal","data-bs-target":"#NewCaseModal"},[(0,a._)("i",{class:"fa-solid fa-plus"})],-1))),V=[I],$={class:"content"},j=["onClick"],A={class:"img"},E=["src"],H={class:"card-body"},O={class:"card-title"};function q(e,t,s,i,w,P){const I=(0,a.up)("LoadingComponent"),q=(0,a.up)("vue-editor");return(0,a.wg)(),(0,a.iD)("main",null,[(0,a.wy)((0,a.Wm)(I,null,null,512),[[o.F8,w.loading]]),(0,a._)("div",n,[(0,a._)("div",d,[(0,a._)("div",c,[(0,a._)("div",r,[u,(0,a._)("div",m,[(0,a._)("div",h,[(0,a._)("div",g,[(0,a._)("div",p,[(0,a.wy)((0,a._)("input",{class:"type-in-box form-control",type:"text",placeholder:"Case Title","onUpdate:modelValue":t[0]||(t[0]=e=>w.caseTitle=e)},null,512),[[o.nr,w.caseTitle]]),f]),(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{class:"type-in-box form-control",type:"text",placeholder:"Subtitle","onUpdate:modelValue":t[1]||(t[1]=e=>w.subtitle=e)},null,512),[[o.nr,w.subtitle]]),C]),(0,a._)("div",b,[(0,a._)("label",_,[w.coverPhotoURL?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",y,S)),w.coverPhotoURL?((0,a.wg)(),(0,a.iD)("img",{key:1,src:w.coverPhotoURL,alt:""},null,8,k)):(0,a.kq)("",!0),(0,a._)("input",{type:"file",ref:"caseCoverPhoto",id:"caseCoverPhoto",onChange:t[2]||(t[2]=(...e)=>P.fileChange&&P.fileChange(...e)),accept:".png, .jpg, ,.jpeg"},null,544)])]),(0,a._)("div",x,[(0,a.Wm)(q,{modelValue:w.caseContent,"onUpdate:modelValue":t[3]||(t[3]=e=>w.caseContent=e),editorOptions:w.editorSettings,useCustomImageHandler:"",onImageAdded:P.imageHandler},null,8,["modelValue","editorOptions","onImageAdded"])])])])]),(0,a._)("div",U,[(0,a._)("button",{type:"button",class:"btn",onClick:t[4]||(t[4]=(...e)=>P.uploadCaseStudy&&P.uploadCaseStudy(...e))},[T,w.loading?((0,a.wg)(),(0,a.iD)("span",D)):(0,a.kq)("",!0)])])])])]),(0,a._)("div",L,[R,P.user?((0,a.wg)(),(0,a.iD)("div",N,V)):(0,a.kq)("",!0)]),(0,a._)("div",$,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.caseStudies,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"card h-100 box-shadow",onClick:t=>P.redirectCase(e.id)},[(0,a._)("div",A,[(0,a._)("img",{src:e.CoverPhotoURL,class:"card-img-top",alt:"align-items-auto"},null,8,E)]),(0,a._)("div",H,[(0,a._)("h5",O,(0,l.zw)(e.Title),1)])],8,j)))),128))])])])}var J=s(287),Z=s(377),z=s(652),B=s.n(z),G=s(911),M=s(153),Q=s(257);J.Quill.register("modules/imageDrop",Z.c),J.Quill.register("modules/imageResize",B());var W={components:{VueEditor:J.VueEditor},created(){this.getAllCases()},data(){return{caseStudies:[],caseTitle:"",subtitle:"",caseContent:"",coverPhotoURL:"",coverPhotoName:"",editorSettings:{modules:{imageDrop:!0,imageResize:{}}},loading:null}},computed:{user(){return this.$store.state.user}},methods:{async getAllCases(){const e=[],t=(0,Q.hJ)(G.db,"CaseStudies"),s=await(0,Q.PL)((0,Q.IO)(t,(0,Q.Xo)("TimeStamp","desc")));s.docs.forEach((t=>{e.push({...t.data(),id:t.id})})),this.caseStudies=e},fileChange(e){this.file=e.target.files[0];const t=this.file.name;console.log(t),this.coverPhotoName=t,this.coverPhotoURL=URL.createObjectURL(this.file)},imageHandler(e,t,s,a){const o=(0,M.iH)(G.tO,`CaseStudiesPhotos/${e.name}`),l=(0,M.B0)(o,this.file);l.on("state_changed",(e=>{console.log(e)}))},uploadCaseStudy(){var e=new Date,t=e.toDateString();if(0!==this.caseTitle.length&&0!==this.caseContent.length)if(this.file){this.loading=!0;const e=(0,M.iH)(G.tO,`/CaseStudiesPhotos/${this.coverPhotoName}`),s=(0,M.B0)(e,this.file);s.on("state_changed",(e=>{console.log(e)}),(e=>{console.log(e),this.loading=!1}),(async()=>{const e=await(0,M.Jt)(s.snapshot.ref),a=(0,Q.hJ)(G.db,"CaseStudies");await(0,Q.ET)(a,{Title:this.caseTitle,Subtitle:this.subtitle,CoverPhotoName:this.coverPhotoName,CoverPhotoURL:e,Content:this.caseContent,TimeStamp:t}),this.loading=!1,document.getElementById("close-modal").click()}))}else this.$snackbar.add({type:"error",text:"Please upload a cover photo for this case!"});else this.$snackbar.add({type:"error",text:"Please ensure Title & Content has been filled!"})},redirectCase(e){this.$router.push(`/casestudies/${e}`)}}},F=s(744);const K=(0,F.Z)(W,[["render",q],["__scopeId","data-v-645d5542"]]);var X=K},201:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var a=s(252);function o(e,t,s,o,l,i){const n=(0,a.up)("CaseStudiesComponent");return(0,a.wg)(),(0,a.j4)(n)}var l=s(826),i={components:{CaseStudiesComponent:l.Z}},n=s(744);const d=(0,n.Z)(i,[["render",o]]);var c=d}}]);
//# sourceMappingURL=201.f6e9e383.js.map