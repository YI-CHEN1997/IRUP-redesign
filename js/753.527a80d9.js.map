{"version":3,"file":"js/753.527a80d9.js","mappings":"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","sources":["webpack://irup-redesign/./src/views/news/NewsContentView.vue","webpack://irup-redesign/./src/views/news/NewsContentView.vue?261c"],"sourcesContent":["<template>\n  <main>\n    <LoadingComponent v-show=\"loading\" />\n\n    <div class=\"summary\">\n      <div class=\"modal fade\" tabindex=\"-1\" id=\"EditCaseModal\">\n        <div\n          class=\"\n            modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl\n          \"\n        >\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\">Edit News</h5>\n              <button\n                type=\"button\"\n                class=\"btn-close\"\n                id=\"close-modal\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n              ></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"container\">\n                <div class=\"inputs\">\n                  <!-- case title -->\n                  <div class=\"caseTitle form-floating mx-3 mt-3\">\n                    <input\n                      class=\"type-in-box form-control\"\n                      type=\"text\"\n                      placeholder=\"Case Title\"\n                      v-model=\"currentNews.Title\"\n                    />\n                    <label for=\"floatingInput\">Title</label>\n                  </div>\n                  <div\n                    class=\"videoUpLoad mx-3 mt-3 p-3 d-flex align-items-center\"\n                  >\n                    <label for=\"caseCoverPhoto\" class=\"p-5 px-0\"\n                      ><span v-if=\"!currentNews.CoverPhotoURL\">\n                        <i class=\"fa-solid fa-image\"></i>Upload News Cover Photo\n                      </span>\n                      <img\n                        :src=\"currentNews.CoverPhotoURL\"\n                        alt=\"\"\n                        v-if=\"currentNews.CoverPhotoURL\"\n                      />\n                      <input\n                        type=\"file\"\n                        ref=\"caseCoverPhoto\"\n                        id=\"caseCoverPhoto\"\n                        @change=\"fileChange\"\n                        accept=\".png, .jpg, ,.jpeg\"\n                      />\n                    </label>\n                  </div>\n\n                  <div class=\"caseContent mx-3 mt-3\">\n                    <vue-editor\n                      v-model=\"currentNews.Content\"\n                      :editorOptions=\"editorSettings\"\n                      useCustomImageHandler\n                      @image-added=\"imageHandler\"\n                    ></vue-editor>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button type=\"button\" class=\"btn\" @click=\"updateNews\">\n                SAVE\n                <span\n                  class=\"spinner-grow spinner-grow-sm\"\n                  role=\"status\"\n                  aria-hidden=\"true\"\n                  v-if=\"loading\"\n                ></span>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <h1 class=\"title text-uppercase\">\n        {{ currentNews.Title }}\n      </h1>\n      <h6 class=\"comment\">{{ currentNews.TimeStamp }}</h6>\n\n      <div class=\"content ql-editor\" v-html=\"currentNews.Content\"></div>\n      <div class=\"case\">\n        <div class=\"edit-icons d-flex flex-column\" v-if=\"user\">\n          <span\n            class=\"d-flex justify-content-center align-items-center edit-icon\"\n            data-bs-toggle=\"modal\"\n            data-bs-target=\"#EditCaseModal\"\n          >\n            <i class=\"fas fa-pen-nib\"></i>\n          </span>\n\n          <span\n            class=\"d-flex justify-content-center align-items-center delete-icon\"\n            @click=\"deleteNews\"\n          >\n            <i class=\"fas fa-trash\"></i>\n          </span>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport \"quill/dist/quill.core.css\";\nimport \"quill/dist/quill.snow.css\";\nimport \"quill/dist/quill.bubble.css\";\nimport { VueEditor, Quill } from \"vue3-editor\";\nimport { ImageDrop } from \"quill-image-drop-module\";\nimport ImageResize from \"quill-image-resize-module--fix-imports-error\";\nQuill.register(\"modules/imageDrop\", ImageDrop);\nQuill.register(\"modules/imageResize\", ImageResize);\n\nimport { db, storage } from \"@/firebase/firebaseinit\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { doc, getDoc, updateDoc, deleteDoc } from \"firebase/firestore\";\n\nexport default {\n  created() {\n    this.getCurrentNews();\n  },\n  components: { VueEditor },\n  data() {\n    return {\n      loading: null,\n      currentNews: {},\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.state.user;\n    },\n  },\n  methods: {\n    getCurrentNews() {\n      const docRef = doc(db, \"News\", this.$route.params.newsId);\n      getDoc(docRef).then((doc) => {\n        this.currentNews = doc.data();\n      });\n    },\n    fileChange(event) {\n      this.file = event.target.files[0];\n      const fileName = this.file.name;\n      console.log(fileName);\n      this.currentNews.CoverPhotoName = fileName;\n      this.currentNews.CoverPhotoURL = URL.createObjectURL(this.file);\n    },\n    imageHandler(file, Editor, cursorLocation, resetUploader) {\n      const storageRef = ref(storage, `NewsPhotos/Photos/${file.name}`);\n      const uploadTask = uploadBytesResumable(storageRef, this.file);\n      uploadTask.on(\"state_changed\", (snapshot) => {\n        console.log(snapshot),\n          (err) => {\n            console.log(err);\n          },\n          async () => {\n            const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\n            Editor.insertEmbed(cursorLocation, \"image\", downloadURL);\n            resetUploader();\n          };\n      });\n    },\n    updateNews() {\n      this.loading = true;\n\n      const storageRef = ref(\n        storage,\n        `/NewsPhotos/CoverPhoto/${this.currentNews.CoverPhotoName}`\n      );\n      const uploadTask = uploadBytesResumable(storageRef, this.file);\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          console.log(snapshot);\n        },\n        (err) => {\n          console.log(err);\n          this.loading = false;\n        },\n        async () => {\n          const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);\n          const docRef = doc(db, \"News\", this.$route.params.newsId);\n          await updateDoc(docRef, {\n            Title: this.currentNews.Title,\n            CoverPhotoName: this.currentNews.CoverPhotoName,\n            CoverPhotoURL: downloadURL,\n            Content: this.currentNews.Content,\n          });\n          this.loading = false;\n          document.getElementById(\"close-modal\").click();\n          this.$router.go(0);\n        }\n      );\n    },\n    deleteNews() {\n      let text = `You are deleting this news post \\n Are you sure you want to do this?`;\n      if (confirm(text) == true) {\n        const docRef = doc(db, \"News\", this.$route.params.newsId);\n        deleteDoc(docRef)\n          .then(() => {\n            this.$router.push(\"/news\");\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/vue3-editor.scss\";\n\n.modal-footer {\n  .btn {\n    width: 100%;\n    background: #66bb6a;\n    border: none;\n    color: #fff;\n\n    &:hover {\n      background: #396e3c;\n    }\n  }\n}\n\n.summary {\n  padding: 0 10vw 5vh 10vw;\n  text-align: center;\n\n  .comment {\n    color: #999;\n    margin-bottom: 1rem;\n  }\n\n  .content {\n    margin: 5rem 6rem;\n\n    h6 {\n      text-align: justify;\n      margin-right: 3rem;\n    }\n\n    img {\n      width: 130%;\n    }\n  }\n\n  @media (max-width: 850px) {\n    padding: 0 0 1vh 0;\n\n    .content {\n      display: block;\n\n      h3 {\n        margin-bottom: 1rem;\n      }\n\n      h6 {\n        margin-right: 0;\n        text-align: left;\n\n        li {\n          text-align: left;\n        }\n      }\n\n      img {\n        margin-top: 2rem;\n        width: 60%;\n      }\n    }\n  }\n}\n\n.case {\n  padding: 0 10vw 5vh 10vw;\n  text-align: center;\n\n  .edit-icons {\n    position: fixed;\n    z-index: 2;\n    right: 4vw;\n    bottom: 4vh;\n  }\n\n  .edit-icon {\n    height: 55px;\n    width: 55px;\n    color: #fff;\n    background-color: #66bb6a;\n    opacity: 0.8;\n    border-radius: 50%;\n    margin: 0.2rem 0;\n    cursor: pointer;\n\n    &:hover {\n      background-color: #396e3c;\n      scale: 1.2;\n      transition: 0.2s;\n    }\n\n    svg {\n      height: 20px;\n    }\n\n    @media (max-width: 850px) {\n      height: 40px;\n      width: 40px;\n\n      svg {\n        width: 20px;\n        height: 20px;\n      }\n    }\n  }\n\n  .delete-icon {\n    height: 55px;\n    width: 55px;\n    color: #fff;\n    background-color: #66bb6a;\n    opacity: 0.9;\n    border-radius: 50%;\n    margin: 0.2rem 0;\n    cursor: pointer;\n\n    &:hover {\n      background-color: #396e3c;\n      scale: 1.2;\n      transition: 0.2s;\n    }\n\n    svg {\n      height: 25px;\n    }\n\n    @media (max-width: 850px) {\n      height: 40px;\n      width: 40px;\n\n      svg {\n        height: 20px;\n        width: 20px;\n      }\n    }\n  }\n\n  .date {\n    color: #999;\n    margin-bottom: 1rem;\n  }\n\n  img {\n    width: 40%;\n  }\n\n  .content {\n    margin: 0 6rem;\n    text-align: justify;\n\n    h5 {\n      margin: 5rem;\n    }\n\n    h6 {\n      text-align: justify;\n      margin-right: 3rem;\n    }\n\n    img {\n      width: 70%;\n      margin: 2rem 0 1rem 0;\n    }\n  }\n\n  @media (max-width: 850px) {\n    padding: 0 0 1vh 0;\n\n    .content {\n      display: block;\n\n      h3 {\n        margin-bottom: 1rem;\n      }\n\n      h6 {\n        margin-right: 0;\n        text-align: left;\n      }\n\n      li {\n        text-align: left;\n      }\n\n      img {\n        margin-top: 2rem;\n        width: 60%;\n      }\n    }\n\n    .edit-icon,\n    .delete-icon {\n      right: 1rem;\n    }\n  }\n}\n</style>","import { render } from \"./NewsContentView.vue?vue&type=template&id=03f3ed14&scoped=true\"\nimport script from \"./NewsContentView.vue?vue&type=script&lang=js\"\nexport * from \"./NewsContentView.vue?vue&type=script&lang=js\"\n\nimport \"./NewsContentView.vue?vue&type=style&index=0&id=03f3ed14&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/jane/Desktop/IRUP website/irup-redesign/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-03f3ed14\"]])\n\nexport default __exports__"],"names":["class","tabindex","id","_createElementVNode","type","for","_hoisted_14","role","_hoisted_28","_createElementBlock","_createVNode","_component_LoadingComponent","$data","_hoisted_5","placeholder","Title","$event","_hoisted_10","CoverPhotoURL","_hoisted_13","_hoisted_16","src","alt","ref","onChange","$options","accept","_component_vue_editor","Content","editorOptions","_ctx","useCustomImageHandler","onImageAdded","onClick","_toDisplayString","TimeStamp","innerHTML","_hoisted_27","Quill","ImageDrop","ImageResize","created","this","getCurrentNews","components","VueEditor","data","loading","currentNews","computed","user","$store","state","methods","docRef","doc","db","$route","params","newsId","getDoc","then","fileChange","event","file","target","files","fileName","name","console","log","CoverPhotoName","URL","createObjectURL","imageHandler","Editor","cursorLocation","resetUploader","storageRef","storage","uploadTask","uploadBytesResumable","on","snapshot","updateNews","err","async","downloadURL","getDownloadURL","updateDoc","document","getElementById","click","$router","go","deleteNews","text","confirm","deleteDoc","push","catch","__exports__","render"],"sourceRoot":""}