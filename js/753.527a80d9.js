"use strict";(self["webpackChunkirup_redesign"]=self["webpackChunkirup_redesign"]||[]).push([[753],{753:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var o=s(252),n=s(963),a=s(577);const l=e=>((0,o.dD)("data-v-03f3ed14"),e=e(),(0,o.Cn)(),e),i={class:"summary"},r={class:"modal fade",tabindex:"-1",id:"EditCaseModal"},d={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl"},c={class:"modal-content"},u=l((()=>(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title"},"Edit News"),(0,o._)("button",{type:"button",class:"btn-close",id:"close-modal","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),m={class:"modal-body"},h={class:"container"},g={class:"inputs"},p={class:"caseTitle form-floating mx-3 mt-3"},w=l((()=>(0,o._)("label",{for:"floatingInput"},"Title",-1))),f={class:"videoUpLoad mx-3 mt-3 p-3 d-flex align-items-center"},v={for:"caseCoverPhoto",class:"p-5 px-0"},C={key:0},N=l((()=>(0,o._)("i",{class:"fa-solid fa-image"},null,-1))),_=(0,o.Uk)("Upload News Cover Photo "),b=[N,_],y=["src"],k={class:"caseContent mx-3 mt-3"},P={class:"modal-footer"},U=(0,o.Uk)(" SAVE "),x={key:0,class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"},T={class:"title text-uppercase"},L={class:"comment"},I=["innerHTML"],R={class:"case"},$={key:0,class:"edit-icons d-flex flex-column"},D=l((()=>(0,o._)("span",{class:"d-flex justify-content-center align-items-center edit-icon","data-bs-toggle":"modal","data-bs-target":"#EditCaseModal"},[(0,o._)("i",{class:"fas fa-pen-nib"})],-1))),E=l((()=>(0,o._)("i",{class:"fas fa-trash"},null,-1))),H=[E];function V(e,t,s,l,N,_){const E=(0,o.up)("LoadingComponent"),V=(0,o.up)("vue-editor");return(0,o.wg)(),(0,o.iD)("main",null,[(0,o.wy)((0,o.Wm)(E,null,null,512),[[n.F8,N.loading]]),(0,o._)("div",i,[(0,o._)("div",r,[(0,o._)("div",d,[(0,o._)("div",c,[u,(0,o._)("div",m,[(0,o._)("div",h,[(0,o._)("div",g,[(0,o._)("div",p,[(0,o.wy)((0,o._)("input",{class:"type-in-box form-control",type:"text",placeholder:"Case Title","onUpdate:modelValue":t[0]||(t[0]=e=>N.currentNews.Title=e)},null,512),[[n.nr,N.currentNews.Title]]),w]),(0,o._)("div",f,[(0,o._)("label",v,[N.currentNews.CoverPhotoURL?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("span",C,b)),N.currentNews.CoverPhotoURL?((0,o.wg)(),(0,o.iD)("img",{key:1,src:N.currentNews.CoverPhotoURL,alt:""},null,8,y)):(0,o.kq)("",!0),(0,o._)("input",{type:"file",ref:"caseCoverPhoto",id:"caseCoverPhoto",onChange:t[1]||(t[1]=(...e)=>_.fileChange&&_.fileChange(...e)),accept:".png, .jpg, ,.jpeg"},null,544)])]),(0,o._)("div",k,[(0,o.Wm)(V,{modelValue:N.currentNews.Content,"onUpdate:modelValue":t[2]||(t[2]=e=>N.currentNews.Content=e),editorOptions:e.editorSettings,useCustomImageHandler:"",onImageAdded:_.imageHandler},null,8,["modelValue","editorOptions","onImageAdded"])])])])]),(0,o._)("div",P,[(0,o._)("button",{type:"button",class:"btn",onClick:t[3]||(t[3]=(...e)=>_.updateNews&&_.updateNews(...e))},[U,N.loading?((0,o.wg)(),(0,o.iD)("span",x)):(0,o.kq)("",!0)])])])])]),(0,o._)("h1",T,(0,a.zw)(N.currentNews.Title),1),(0,o._)("h6",L,(0,a.zw)(N.currentNews.TimeStamp),1),(0,o._)("div",{class:"content ql-editor",innerHTML:N.currentNews.Content},null,8,I),(0,o._)("div",R,[_.user?((0,o.wg)(),(0,o.iD)("div",$,[D,(0,o._)("span",{class:"d-flex justify-content-center align-items-center delete-icon",onClick:t[4]||(t[4]=(...e)=>_.deleteNews&&_.deleteNews(...e))},H)])):(0,o.kq)("",!0)])])])}var j=s(287),q=s(377),O=s(652),A=s.n(O),J=s(911),M=s(153),z=s(257);j.Quill.register("modules/imageDrop",q.c),j.Quill.register("modules/imageResize",A());var B={created(){this.getCurrentNews()},components:{VueEditor:j.VueEditor},data(){return{loading:null,currentNews:{}}},computed:{user(){return this.$store.state.user}},methods:{getCurrentNews(){const e=(0,z.JU)(J.db,"News",this.$route.params.newsId);(0,z.QT)(e).then((e=>{this.currentNews=e.data()}))},fileChange(e){this.file=e.target.files[0];const t=this.file.name;console.log(t),this.currentNews.CoverPhotoName=t,this.currentNews.CoverPhotoURL=URL.createObjectURL(this.file)},imageHandler(e,t,s,o){const n=(0,M.iH)(J.tO,`NewsPhotos/Photos/${e.name}`),a=(0,M.B0)(n,this.file);a.on("state_changed",(e=>{console.log(e)}))},updateNews(){this.loading=!0;const e=(0,M.iH)(J.tO,`/NewsPhotos/CoverPhoto/${this.currentNews.CoverPhotoName}`),t=(0,M.B0)(e,this.file);t.on("state_changed",(e=>{console.log(e)}),(e=>{console.log(e),this.loading=!1}),(async()=>{const e=await(0,M.Jt)(t.snapshot.ref),s=(0,z.JU)(J.db,"News",this.$route.params.newsId);await(0,z.r7)(s,{Title:this.currentNews.Title,CoverPhotoName:this.currentNews.CoverPhotoName,CoverPhotoURL:e,Content:this.currentNews.Content}),this.loading=!1,document.getElementById("close-modal").click(),this.$router.go(0)}))},deleteNews(){let e="You are deleting this news post \n Are you sure you want to do this?";if(1==confirm(e)){const e=(0,z.JU)(J.db,"News",this.$route.params.newsId);(0,z.oe)(e).then((()=>{this.$router.push("/news")})).catch((e=>{console.log(e)}))}}}},Q=s(744);const S=(0,Q.Z)(B,[["render",V],["__scopeId","data-v-03f3ed14"]]);var W=S}}]);
//# sourceMappingURL=753.527a80d9.js.map